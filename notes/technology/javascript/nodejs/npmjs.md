---
slug: /npmjs
sidebar_label: npm
---

# npm

<figure class="inline-flex bg-white">

![](../.assets/npmjs.Npm-logo.svg)

</figure>

## `package.json`

### バージョン

[セマンティックバージョニング 2.0.0](https://semver.org/lang/ja/) に従った書式でバージョンを管理します。

```text title="セマンティックバージョニングの書式"
<メジャーバージョン>.<マイナーバージョン>.<パッチバージョン>[-<プレリリース識別子>]
```

<dl>
<dt><em>メジャーバージョン</em></dt>
<dd>以前のバージョンと互換性のない（破壊的な）変更が加えられたとき</dd>

<dt><em>マイナーバージョン</em></dt>
<dd>互換性を保ったまま機能を追加したとき</dd>

<dt><em>パッチバージョン</em></dt>
<dd>互換性を保ったまま不具合を修正したとき</dd>

<dt><em>プレリリース識別子</em></dt>
<dd>

例：`1.0.0-alpha`, `1.0.0-alpha.1`, `1.0.0-0.3.7`, `1.0.0-x.7.z.92`

</dd>
</dl>

:::tip 開発初期のバージョン

メジャーバージョンがゼロの場合、それは高速開発を意味しています。つまり、不安定な状態です。開発開始時は、`0.1.0` からはじめ、正式版の `1.0.0` がリリースされるまでは、マイナーバージョンを順次上げていくといいでしょう。

:::

#### バージョン指定の接頭辞とキーワード

バージョン指定をする際、接頭辞を付けることで、バージョンの範囲を指定します：

<dl>
<dt><code>^</code></dt>
<dd>

キャレット「`^`」は、互換性を示します。バージョンを表す3つの数字（_メジャー_、_マイナー_、_パッチ_）のうち、最も左側の `0` でない数字が更新されるまでのバージョンに依存することを意味します。例えば…

- `"^2.6.3"` — `">=2.6.3 <3.0.0"` の意味。
- `"^0.6.3"` — `">=0.6.3 <0.7.0"` の意味。
- `"^0.0.3"` — `">=0.0.3 <0.0.4"` の意味。

</dd>

<dt><code>~</code></dt>
<dd>

チルダ「`~`」は、パッチバージョンの更新の範囲内に依存を限定することを意味します。例えば…

- `"~1.2.3"` — `">=1.2.3 <1.3.0"` の意味。
- `"~0.2.3"` — `">=0.2.3 <0.3.0"` の意味。

</dd>

<dt><code>||</code></dt>
<dd>

セットを組み合わせます。例えば `"< 2.1 || > 2.6"`

</dd>

<dt><em>比較演算子</em></dt>
<dd>

`>`, `>=`, `<=`, `<`, `=`

</dd>

<dt><code>-</code></dt>
<dd>

さまざまなバージョンを受け入れます。例えば `"1.1.0 - 2.6.2"`

</dd>

<dt><em>接頭辞なし</em></dt>
<dd>

接頭辞を付けなかった場合、指定内容と厳密に一致するバージョンを意味します。ただし、バージョンを指定することも可能で、その場合はバージョン範囲が補完されます。例えば…

- `"2.6.3"` — `"2.6.3"` の意味。
- `"1.1"` — `">=1.1.0 <1.2.0"` の意味。
- `"1"` — `">=1.0.0 <2.0.0"` の意味。
- `""` — `">=0.0.0"` の意味。

</dd>

<dt>キーワード <code>latest</code></dt>
<dd>

利用可能な最新バージョン

</dd>
</dl>

## レジストリ

### レジストリへのパッケージの公開手順

1. npm にアカウントを登録する
2. npm パッケージを作る
3. 実装する
4. README を書く
5. ライセンスを決める
6. レジストリへの公開対象とするファイルを設定する
7. `npm publish` コマンドでパッケージを公開する

## コマンド

- `npm` – JavaScript パッケージマネージャ
  - `access` – 公開されたパッケージのアクセスレベルを設定する
  - `adduser` – レジストリユーザーアカウントを追加する
  - `audit` – セキュリティ監査を実行する
  - `bin` – npm bin フォルダを表示する
  - `bugs` – Web ブラウザでパッケージのバグを報告する
  - `cache` – パッケージキャッシュを操作する
  - `ci` – プロジェクトをクリーンインストールする
  - `completion` – npmのタブ補完
  - `config` – npm 構成ファイルを管理する
  - `dedupe` – 重複を減らす
  - `deprecate` – パッケージのバージョンを廃止する
  - `diff` – レジストリ diff コマンド
  - `dist-tag` – パッケージ配布タグを変更する
  - `docs` – Web ブラウザのパッケージのドキュメント
  - `doctor` – npm 環境を確認してください
  - `edit` – インストールされたパッケージを編集する
  - `exec` – npm パッケージからコマンドを実行する
  - `explain` – インストールされているパッケージについて説明する
  - `explore` – インストールされたパッケージを参照する
  - `find-dupes` – パッケージツリーで重複を見つける
  - `fund` – 資金調達情報を取得する
  - `help` – npm ヘルプドキュメントを検索する
  - `help-search` – npm でヘルプを取得
  - `hook` – レジストリフックを管理する
  - `init` – `package.json` ファイルを作成する
  - `install` – パッケージをインストールする
  - `install-ci-test` – ]プロジェクトをクリーンインストールし、テストを実行する
  - `install-test` – パッケージをインストールしてテストを実行する
  - `link` – パッケージフォルダをシンボリックリンクする
  - `logout` – レジストリからログアウトする
  - `ls` – インストールされているパッケージのリスト
  - `org` – 組織を管理する
  - `outdated` – パッケージが古くなっているか確認する
  - `owner` – パッケージ所有者を管理する
  - `pack` – パッケージから tarball を作成する
  - `ping` – npm レジストリに ping を実行する
  - `pkg` – `package.json` を管理します
  - `prefix` – プレフィックスを表示する
  - `profile` – レジストリプロファイルの設定を変更する
  - `prune` – 無関係なパッケージを削除する
  - `publish` – パッケージを公開する
  - `rebuild` – パッケージを再構築する
  - `repo` – ブラウザでパッケージリポジトリページを開く
  - `restart` – パッケージを再起動する
  - `root` – npm ルートを表示する
  - `run-script` – 任意のパッケージスクリプトを実行する
  - `search` – パッケージを検索する
  - `set-script` – `package.json` のスクリプトセクションでタスクを設定する
  - `shrinkwrap` – 公開のために依存関係のバージョンをロックダウンする
  - `star` – お気に入りのパッケージにマークを付ける
  - `stars` – お気に入りとしてマークされたパッケージを表示する
  - `start` – パッケージを開始する
  - `stop` – パッケージを停止する
  - `team` – 組織チームとチームメンバーシップを管理する
  - `test` – パッケージをテストする
  - `token` – 認証トークンを管理する
  - `uninstall` – パッケージを削除する
  - `unpublish` – レジストリからパッケージを削除する
  - `unstar` – お気に入りのパッケージからアイテムを削除する
  - `update` – パッケージを更新する
  - `version` – パッケージバージョンをバンプ
  - `view` – レジストリ情報を表示する
  - `whoami` – npmのユーザー名を表示する
- `npx` – npmパッケージからコマンドを実行する

### パッケージのインストール（`npm install`）

- `package.json` に基づいてインストールする

  ```bash
  npm i
  ```
  
- 指定のパッケージを `dependencies` としてインストールする

  ```bash
  npm i <package1> [package2...]
  ```
  
- 指定のパッケージを `devDependencies` としてインストールする

  ```bash
  npm i -D <package1> [package2...]
  ```
  
### 実行可能パッケージの実行（`npx`）

- `node_modules` にあるパッケージを実行

  ```bash
  npx <package>[@version] [args...]
  ```
  
  :::note　補足
  
  - `node_modules` にパッケージがない場合、レジストリからダウンロードされ、実行されます。
  - また、グローバルインストールしたパッケージを実行する場合は、`npx`は必要ありません。
  
  :::

---
slug: /c10k-problem
sidebar_label: C10K問題
---

# C10K問題

**C10K問題**は、サーバーのハードウェア性能は問題ないにもかかわらず、クライアントの同時接続数が多くなるとサービスの応答が遅くなるという問題です。

## 原因

C10K問題の原因は主に3つあります：

- プロセス数の上限
- コンテキストスイッチのコスト
- ファイルディスクリプターの上限

## 解決策

- サーバーの台数を増やす。
- シングルプロセス・シングルスレッドでリクエストをさばく。

## 解決事例

### Node.js

Node.js は、シングルプロセス・シングルスレッド・非同期I/Oに基づいて設計されています。処理すべきものを次々にイベントキューに追加していき、それらすべてを1つのプロセスで処理します。CPUを使わない処理は非同期で実行され、完了したらコールバック関数が呼ばれます。

注意点としては次のことが挙げられます：

- 非同期処理の記述が面倒
- グローバル変数が全リクエスト間で共有される
- リソースが回収されない
- 一部のバグがサービス全体に影響する恐れがある
- CPU リソースを消費するサービスには向かない

### nginx

## 参考文献

- さくらのナレッジ「いまさら聞けないNode.js」（https://knowledge.sakura.ad.jp/24148/）